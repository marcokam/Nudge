{"version":3,"file":"ReportData.js","sourceRoot":"","sources":["../../../Data/Report/ReportData.ts"],"names":[],"mappings":"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","sourcesContent":["import { format } from \"date-fns\";\r\nimport { WeeklyActivityResult, StrengthChangeResult } from \"./ReportInterfaces\";\r\n\r\nexport function getWeeklyActivityChartOptions(weeklyActivity: Partial<WeeklyActivityResult> = {}) {\r\n    const { dtaPnt = [] } = weeklyActivity;\r\n    const labels = dtaPnt.map(p => p.TimeTick);\r\n    const relationshipData = dtaPnt.map(p => p.RelationshipGrowth);\r\n    const meetingsData = dtaPnt.map(p => p.Meetings);\r\n    const outboundData = dtaPnt.map(p => p.OutboundEmail);\r\n    const maxDataValue = relationshipData\r\n        .concat(meetingsData)\r\n        .concat(outboundData)\r\n        .reduce((acc, v) => Math.max(acc, Math.abs(v)), 0);\r\n    const axesDefault = {\r\n        ticks: {\r\n            fontSize: 10,\r\n            fontFamily: \"proxima-nova, system-ui, Arial, Helvetica, sans-serif\",\r\n            padding: 5,\r\n            maxRotation: 0,\r\n        },\r\n    };\r\n    const chartOptions = {\r\n        type: \"line\",\r\n        data: {\r\n            labels: labels,\r\n            datasets: [\r\n                {\r\n                    label: \"Relationships Built\",\r\n                    data: relationshipData,\r\n                    backgroundColor: \"#9013FE\",\r\n                    borderColor: \"#9013FE\",\r\n                    fill: false,\r\n                },\r\n                {\r\n                    label: \"Meetings Booked\",\r\n                    data: meetingsData,\r\n                    backgroundColor: \"#50E3C2\",\r\n                    borderColor: \"#50E3C2\",\r\n                    fill: false,\r\n                },\r\n                {\r\n                    label: \"Emails Sent\",\r\n                    data: outboundData,\r\n                    backgroundColor: \"#1A9BFC\",\r\n                    borderColor: \"#1A9BFC\",\r\n                    fill: false,\r\n                },\r\n            ],\r\n        },\r\n        options: {\r\n            legend: {\r\n                position: \"bottom\",\r\n                labels: {\r\n                    borderWidth: 0,\r\n                    boxWidth: 10,\r\n                    usePointStyle: true,\r\n                    generateLabels: () => {\r\n                        return [\r\n                            { text: \"Relationships Built\", fillStyle: \"#9013FE\", strokeStyle: \"rgba(0, 0, 0, 0.0)\" },\r\n                            { text: \"Meetings Booked\", fillStyle: \"#50E3C2\", strokeStyle: \"rgba(0, 0, 0, 0.0)\" },\r\n                            { text: \"Emails Sent\", fillStyle: \"#1A9BFC\", strokeStyle: \"rgba(0, 0, 0, 0.0)\" },\r\n                        ];\r\n                    },\r\n                },\r\n                fontSize: 10,\r\n                fontFamily: \"proxima-nova, system-ui, Arial, Helvetica, sans-serif\",\r\n            },\r\n            scales: {\r\n                xAxes: [\r\n                    {\r\n                        ...axesDefault,\r\n                        gridLines: {\r\n                            drawOnChartArea: false,\r\n                            drawTicks: true,\r\n                            offsetGridLines: false,\r\n                        },\r\n                        barPercentage: 0.7,\r\n                        categoryPercentage: 0.8,\r\n                    },\r\n                ],\r\n                yAxes: [\r\n                    {\r\n                        ...axesDefault,\r\n                        ticks: {\r\n                            ...axesDefault.ticks,\r\n                            padding: 10,\r\n                            stepSize: Math.ceil(maxDataValue / 3),\r\n                        },\r\n                        display: true,\r\n                    },\r\n                ],\r\n            },\r\n        },\r\n    };\r\n\r\n    return chartOptions;\r\n}\r\n\r\nexport function getStrengthChangeChartOptions(weeklyStrengthChange: Partial<StrengthChangeResult> = {}, weeks: number) {\r\n    const { dtaPnt: data = [] } = weeklyStrengthChange;\r\n    const dataToUse = data.slice(-weeks);\r\n    const labels = dataToUse.map(p => format(p.strDte, \"MMM D\"));\r\n    const strengthChangeData = dataToUse.map(p => p.relStrTtlDif + 4 * p.relStrStrDif); // eslint-disable-line\r\n    const maxDataValue = strengthChangeData.reduce((acc, v) => Math.max(acc, Math.abs(v)), 0);\r\n    const colours = strengthChangeData.map(strengthDelta => (strengthDelta < 0 ? \"#ff5f5f\" : \"#1A9BFC\"));\r\n    const axesDefault = {\r\n        ticks: {\r\n            fontSize: 10,\r\n            fontFamily: \"proxima-nova, Arial, Helvetica, sans-serif\",\r\n            padding: 5,\r\n            maxRotation: 0,\r\n        },\r\n    };\r\n    const chartOptions = {\r\n        type: \"bar\",\r\n        data: {\r\n            labels,\r\n            datasets: [\r\n                {\r\n                    label: \"Strength change\",\r\n                    backgroundColor: colours,\r\n                    data: strengthChangeData,\r\n                },\r\n            ],\r\n        },\r\n        options: {\r\n            lineAtIndex: 0,\r\n            annotation: {\r\n                annotations: [\r\n                    {\r\n                        type: \"line\",\r\n                        mode: \"horizontal\",\r\n                        scaleID: \"y-axis-0\",\r\n                        value: 0,\r\n                        borderColor: \"rgb(75, 192, 192)\",\r\n                        borderWidth: 2,\r\n                        label: {\r\n                            enabled: false,\r\n                            content: \"Test label\",\r\n                        },\r\n                    },\r\n                ],\r\n            },\r\n            legend: { display: false },\r\n            scales: {\r\n                xAxes: [\r\n                    {\r\n                        ...axesDefault,\r\n                        gridLines: {\r\n                            drawOnChartArea: false,\r\n                            drawTicks: true,\r\n                            offsetGridLines: false,\r\n                        },\r\n                        barPercentage: 0.7,\r\n                        categoryPercentage: 0.6,\r\n                    },\r\n                ],\r\n                yAxes: [\r\n                    {\r\n                        ...axesDefault,\r\n                        ticks: {\r\n                            ...axesDefault.ticks,\r\n                            stepSize: Math.ceil(maxDataValue / 2),\r\n                        },\r\n                    },\r\n                ],\r\n            },\r\n            tooltips: {\r\n                mode: \"nearest\",\r\n                intersect: false,\r\n                callbacks: {\r\n                    label: function(tooltipItem: { datasetIndex: number; yLabel: number }, data: { datasets: [{ label: string }] }) {\r\n                        let label = data.datasets[tooltipItem.datasetIndex].label || \"\";\r\n                        if (label) {\r\n                            label += \": \";\r\n                        }\r\n                        label += tooltipItem.yLabel > 0 ? `+${tooltipItem.yLabel}` : tooltipItem.yLabel;\r\n                        return label;\r\n                    },\r\n                },\r\n            },\r\n        },\r\n    };\r\n\r\n    return chartOptions;\r\n}"]}