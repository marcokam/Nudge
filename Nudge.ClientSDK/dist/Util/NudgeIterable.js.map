{"version":3,"file":"NudgeIterable.js","sourceRoot":"","sources":["../../Util/NudgeIterable.ts"],"names":[],"mappings":"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","sourcesContent":["import {\r\n    filter,\r\n    map,\r\n    reduce,\r\n    first,\r\n    flatMap,\r\n    uniqBy,\r\n    reverse,\r\n    range,\r\n    min,\r\n    max,\r\n    any\r\n} from \"./IterableUtils\";\r\nimport { Comparer } from \"~/Comparison/ComparisonInterfaces\";\r\n\r\n// The generator functions in IterableUtils are not re-runnable.  \r\n// Wrap them in this to make them called every time the consumer asks\r\n// for an Iterator.\r\nfunction produce<T>(fn: () => Iterable<T>): Iterable<T> {\r\n    return {\r\n        [Symbol.iterator]: () => fn()[Symbol.iterator]()\r\n    }\r\n}\r\n\r\nexport default class NudgeIterable<T> implements Iterable<T> {\r\n    \r\n    [Symbol.iterator] = (): Iterator<T> => this.wrapped[Symbol.iterator]();\r\n\r\n    private readonly wrapped: Iterable<T>;\r\n\r\n    constructor(wrapped: Iterable<T>) {\r\n        this.wrapped = wrapped;\r\n    }\r\n\r\n    static fromIterable = <T>(items: Iterable<T>) => new NudgeIterable<T>(items);\r\n    static fromArray = <T>(items: T[]) => new NudgeIterable<T>(items);\r\n    static fromItems = <T>(...items: T[]) => new NudgeIterable<T>(items);\r\n    static fromEmpty = <T>() => new NudgeIterable<T>([]);\r\n    static fromRange = (start: number, end: number, step: number = 1) => new NudgeIterable(range(start, end, step));\r\n\r\n    filter = (predicate: ((x: T) => boolean)) => new NudgeIterable<T>(\r\n        produce(() => filter(this.wrapped, predicate))\r\n    );\r\n\r\n    map = <U>(mapper: (item: T) => U) => new NudgeIterable<U>(\r\n        produce(() => map(this.wrapped, mapper))\r\n    );\r\n\r\n    reduce = <U>(aggregator: (acc: U, item: T) => U, start: U): U =>\r\n        reduce(this.wrapped, aggregator, start);\r\n\r\n    first = (): T | null =>\r\n        first(this.wrapped);\r\n\r\n    flatMap = <U>(mapper: (item: T) => Iterable<U>) => new NudgeIterable<U>(\r\n        produce(() => flatMap(this.wrapped, mapper))\r\n    );\r\n\r\n    uniqBy = <K>(keyFn: (item: T) => K) => new NudgeIterable<T>(\r\n        produce(() => uniqBy(this.wrapped, keyFn))\r\n    );\r\n\r\n    reverse = () => new NudgeIterable<T>(\r\n        produce(() => reverse(this.wrapped))\r\n    );\r\n\r\n    toArray = () =>\r\n        Array.from(this.wrapped);\r\n\r\n    min = (comparer?: Comparer<T>) =>\r\n        min(this.wrapped, comparer);\r\n        \r\n    max = (comparer?: Comparer<T>) =>\r\n        max(this.wrapped, comparer);\r\n\r\n    any = (predicate?: ((x: T) => boolean)): boolean => (\r\n        any(this.wrapped, predicate)\r\n    );\r\n}\r\n"]}