{"version":3,"file":"Prism.js","sourceRoot":"","sources":["../../../../Util/fp/Instances/Prism.ts"],"names":[],"mappings":"AAGA,MAAM,CAAC,IAAM,GAAG,GAAG,OAAO,CAAC;AAG3B;IASI,eAAY,MAA2B,EAAE,MAAyB;QAAlE,iBAGC;QAXQ,QAAG,GAAY,OAAO,CAAC;QAavB,SAAI,GAAG,UAAI,MAA2B,EAAE,MAAyB,IAAkB,OAAA,IAAI,KAAK,CACjG,UAAC,CAAI,IAAK,OAAA,KAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,EAA5B,CAA4B,EACtC,UAAC,CAAI,EAAE,CAAI,IAAK,OAAA,KAAI,CAAC,MAAM,CAAC,CAAC,CAAC;aACzB,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,KAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAA5B,CAA4B,CAAC;aACtC,SAAS,CAAC,cAAM,OAAA,CAAiB,EAAjB,CAAiB,CAAC,EAFvB,CAEuB,CAC1C,EAL2F,CAK3F,CAAC;QATE,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACzB,CAAC;IARM,QAAE,GAAG,UACR,MAA2B,EAC3B,MAAyB,IACxB,OAAA,IAAI,KAAK,CAAC,MAAM,EAAE,MAAM,CAAC,EAAzB,CAAyB,CAAC;IAanC,YAAC;CAAA,AApBD,IAoBC;SApBY,KAAK","sourcesContent":["import { Option } from \"./Option\";\r\n\r\n\r\nexport const URI = \"Prism\";\r\nexport type URI = typeof URI;\r\n \r\nexport class Prism<A, B> {\r\n    readonly tag: \"Prism\" = \"Prism\";\r\n    readonly tryGet: (a: A) => Option<B>;\r\n    readonly inject: (b: B, a: A) => A;\r\n    static of = <A, B>(\r\n        tryGet: (a: A) => Option<B>,\r\n        inject: (b: B, a: A) => A,\r\n    ) => new Prism(tryGet, inject);\r\n\r\n    constructor(tryGet: (a: A) => Option<B>, inject: (b: B, a: A) => A) {\r\n        this.tryGet = tryGet;\r\n        this.inject = inject;\r\n    }\r\n    \r\n    readonly then = <C>(tryGet: (b: B) => Option<C>, inject: (c: C, b: B) => B): Prism<A, C> => new Prism(\r\n        (a: A) => this.tryGet(a).chain(tryGet),\r\n        (c: C, a: A) => this.tryGet(a)\r\n            .map(b => this.inject(inject(c, b), a))\r\n            .getOrElse(() => c as unknown as A)\r\n    );\r\n}\r\n"]}