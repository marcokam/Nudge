{"version":3,"file":"disableSave.js","sourceRoot":"","sources":["../../../Api/Middleware/disableSave.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,YAAY,EAAE,MAAM,qBAAqB,CAAC;AAEnD,IAAM,oBAAoB,GAAG,cAAM,OAAA,YAAY,EAAZ,CAAY,CAAC;AAChD,MAAM,CAAC,IAAM,kBAAkB,GAAG,UAAC,OAAmB,IAAK,OAAA,OAAO,CAAC,OAAO,CAAC;IACvE,EAAE,EAAE,IAAI;IACR,GAAG,EAAE,OAAO,CAAC,GAAG;IAChB,MAAM,EAAE,GAAG;IACX,IAAI,EAAE,oBAAoB;IAC1B,IAAI,EAAE,oBAAoB;IAC1B,OAAO,EAAE,IAAsB;IAE/B,OAAO,EAAE,oBAAoB;IAC7B,OAAO,EAAE,oBAAoB;CAChC,CAAC,EAVyD,CAUzD,CAAC;AACH,IAAM,OAAO,GAAG,CAAC,MAAM,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC;AAE1C,IAAM,qBAAqB,GAAG,UAAC,OAAgB,IAA2B,OAAA,UAAC,OAAmB,EAAE,IAAuB;IACnH,IAAM,aAAa,GAAG,OAAO,IAAI,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;IAClE,OAAO,aAAa;QAChB,CAAC,CAAC,kBAAkB,CAAC,OAAO,CAAC;QAC7B,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;AACxB,CAAC,EALyE,CAKzE,CAAC;AACF,eAAe,qBAAqB,CAAC","sourcesContent":["import { ApiRequestMiddleware, ApiRequest, ApiRequestInvoker, ApiResponse } from \"../ApiInterfaces\";\r\nimport { emptyPromise } from \"~/Util/PromiseUtils\";\r\n\r\nconst emptyPromiseProducer = () => emptyPromise;\r\nexport const createMockResponse = (request: ApiRequest) => Promise.resolve({ \r\n    ok: true,\r\n    url: request.url,\r\n    status: 204,\r\n    text: emptyPromiseProducer,\r\n    json: emptyPromiseProducer,\r\n    headers: null as any as Headers, //new Headers({})\r\n\r\n    getText: emptyPromiseProducer,\r\n    getJson: emptyPromiseProducer,\r\n});\r\nconst methods = [\"POST\", \"PUT\", \"DELETE\"];\r\n\r\nconst disableSaveMiddleware = (disable: boolean): ApiRequestMiddleware => (request: ApiRequest, next: ApiRequestInvoker): Promise<ApiResponse> => {\r\n    const isDisableSave = disable && methods.includes(request.method);\r\n    return isDisableSave\r\n        ? createMockResponse(request)\r\n        : next(request);\r\n};\r\nexport default disableSaveMiddleware;"]}