{"version":3,"file":"timeoutAbortSignal.js","sourceRoot":"","sources":["../../../Api/Middleware/timeoutAbortSignal.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,OAAO,EAAE,wBAAwB,EAAE,gBAAgB,EAAE,MAAM,qBAAqB,CAAC;AAGjF,IAAM,kBAAkB,GAAG,UAAC,gBAAwB,IAA2B,OAAA,UAAC,OAAmB,EAAE,IAAuB;IACxH,IAAM,SAAS,GAAG,OAAO,CAAC,OAAO,IAAI,gBAAgB,CAAC;IACtD,IAAM,aAAa,GAAG,wBAAwB,CAAC,SAAS,CAAC,CAAC;IAC1D,IAAM,WAAW,GAAG,OAAO,CAAC,MAAM;QAC9B,CAAC,CAAC,gBAAgB,CAAC,aAAa,EAAE,OAAO,CAAC,MAAM,CAAC;QACjD,CAAC,CAAC,aAAa,CAAC;IACpB,OAAO,IAAI,uBACJ,OAAO,KACV,MAAM,EAAE,WAAW,IACrB,CAAC;AACP,CAAC,EAV8E,CAU9E,CAAC;AACF,eAAe,kBAAkB,CAAC","sourcesContent":["import { createTimeoutAbortSignal, joinAbortSignals } from \"~/Util/PromiseUtils\";\r\nimport { ApiRequestMiddleware, ApiRequest, ApiRequestInvoker, ApiResponse } from \"../ApiInterfaces\";\r\n\r\nconst timeoutAbortSignal = (defaultTimeoutMs: number): ApiRequestMiddleware => (request: ApiRequest, next: ApiRequestInvoker): Promise<ApiResponse> => {\r\n    const timeoutMs = request.timeout || defaultTimeoutMs;\r\n    const timeoutSignal = createTimeoutAbortSignal(timeoutMs);    \r\n    const finalSignal = request.signal\r\n        ? joinAbortSignals(timeoutSignal, request.signal)\r\n        : timeoutSignal;\r\n    return next({\r\n        ...request,\r\n        signal: finalSignal\r\n    });\r\n};\r\nexport default timeoutAbortSignal;"]}